(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8928:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var a=n(5785),r=n(531),s=n(7757),o=n.n(s),i=(n(9008),n(5675),n(4476)),c=n.n(i),u=n(7294),l=n(387),d=n(5755),p=n(9536),m=n(1607),v=JSON.parse('{"Mt":[{"inputs":[],"stateMutability":"payable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":false,"internalType":"uint256","name":"timestamp","type":"uint256"},{"indexed":false,"internalType":"string","name":"message","type":"string"}],"name":"NewWave","type":"event"},{"inputs":[],"name":"getAllWaves","outputs":[{"components":[{"internalType":"address","name":"waver","type":"address"},{"internalType":"string","name":"message","type":"string"},{"internalType":"uint256","name":"timestamp","type":"uint256"}],"internalType":"struct WavePortal.Wave[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getTotalWaves","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"lastWavedAt","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"_message","type":"string"}],"name":"wave","outputs":[],"stateMutability":"nonpayable","type":"function"}]}'),h=n(5893),f=function(){var e="0xbAd0d5E03493CbeBC2D9afCED2Cd86624f1Fd548",t=v.Mt,n=(0,u.useState)(""),s=n[0],i=n[1],f=(0,u.useState)(""),g=(f[0],f[1],(0,u.useState)(!1)),_=g[0],x=g[1],w=(0,u.useState)(""),b=w[0],y=w[1],k=(0,u.useState)(0),C=k[0],j=k[1],N=(0,u.useState)([]),H=N[0],T=N[1],W=(0,u.useState)(!1),E=W[0],M=W[1],S=function(){var n=(0,r.Z)(o().mark((function n(){var r,s,i,c,u,p,m;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=window,s=r.ethereum,n.prev=1,!s){n.next=15;break}return i=new d.Q(s),c=i.getSigner(),u=new l.CH(e,t,c),n.next=8,u.getAllWaves();case 8:p=n.sent,m=[],p.forEach((function(e){m.push({address:e.waver,timestamp:new Date(1e3*e.timestamp),message:e.message})})),T(m),u.on("NewWave",(function(e,t,n){console.log("NewWave",e,t,n),T((function(r){return[].concat((0,a.Z)(r),[{address:e,timestamp:new Date(1e3*t),message:n}])}))})),n.next=16;break;case 15:console.log("Ethereum object doesn't exist!");case 16:n.next=21;break;case 18:n.prev=18,n.t0=n.catch(1),console.log(n.t0);case 21:case"end":return n.stop()}}),n,null,[[1,18]])})));return function(){return n.apply(this,arguments)}}(),F=function(){var e=(0,r.Z)(o().mark((function e(){var t,n,a,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=window,n=t.ethereum){e.next=7;break}return console.log("Make sure you have metamask!"),e.abrupt("return");case 7:console.log("We have the ethereum object",n);case 8:return e.next=10,n.request({method:"eth_accounts"});case 10:0!==(a=e.sent).length?(r=a[0],console.log("Found an authorized account:",r),y(r),S()):console.log("No authorized account found"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),Z=function(){var n=(0,r.Z)(o().mark((function n(){var a,r,s,i,c,u;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,a=window,!(r=a.ethereum)){n.next=12;break}return s=new d.Q(r),i=s.getSigner(),c=new l.CH(e,t,i),n.next=8,c.getTotalWaves();case 8:u=n.sent,j(u.toNumber()),n.next=13;break;case 12:console.log("Ethereum object doesn't exist!");case 13:n.next=18;break;case 15:n.prev=15,n.t0=n.catch(0),console.log(n.t0);case 18:case"end":return n.stop()}}),n,null,[[0,15]])})));return function(){return n.apply(this,arguments)}}(),A=function(){var e=(0,r.Z)(o().mark((function e(){var t,n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=window,n=t.ethereum){e.next=5;break}return alert("Get MetaMask!"),e.abrupt("return");case 5:return e.next=7,n.request({method:"eth_requestAccounts"});case 7:a=e.sent,console.log("Connected",a[0]),y(a[0]),Z(),S(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var n=(0,r.Z)(o().mark((function n(){var a,r,c,u,p,m,v;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,a=window,!(r=a.ethereum)){n.next=36;break}return c=new d.Q(r),u=c.getSigner(),p=new l.CH(e,t,u),n.next=8,p.wave(s,{gasLimit:3e5});case 8:return m=n.sent,n.prev=9,x(!0),M(!0),console.log("Mining...",m.hash),n.next=15,m.wait();case 15:M(!1),console.log("Mined -- ",m.hash),x(!1),i(""),n.next=29;break;case 21:n.prev=21,n.t0=n.catch(9),x(!1),M(!1),console.log(n.t0),i(""),x(!1),alert("Something went wrong /:");case 29:return n.next=31,p.getTotalWaves();case 31:v=n.sent,j(v.toNumber()),S(),n.next=37;break;case 36:console.log("Ethereum object doesn't exist!");case 37:n.next=43;break;case 39:n.prev=39,n.t1=n.catch(0),console.log(n.t1),M(!1);case 43:case"end":return n.stop()}}),n,null,[[0,39],[9,21]])})));return function(){return n.apply(this,arguments)}}();return(0,u.useEffect)((function(){F(),Z()}),[]),(0,h.jsx)("div",{className:c().mainContainer,children:(0,h.jsxs)("div",{className:c().dataContainer,children:[(0,h.jsx)("div",{className:c().header,children:"\ud83d\udc4b Hey there!"}),(0,h.jsx)("div",{className:c().bio,children:"I am Alvin and I'm not sure what I'm doing."}),(0,h.jsx)("div",{className:c().bio,children:"Connect your Ethereum wallet and wave at me!"}),b?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:c().textField,children:(0,h.jsx)(p.Z,{size:"small",variant:"standard",placeholder:"Include a Message...",fullWidth:"true",onChange:function(e){i(e.target.value)},value:s,disabled:_})}),E?(0,h.jsx)("button",{className:c().waveButton,onClick:B,children:(0,h.jsx)(m.Z,{type:"ThreeDots",color:"#2a9d8f",height:10,width:40})}):(0,h.jsx)("button",{className:c().waveButton,onClick:B,children:"Wave at Me"})]}):(0,h.jsx)("button",{className:c().waveButton,onClick:A,children:"Connect Wallet"}),(0,h.jsxs)("div",{className:c().bio,children:["Current number of waves: ",C]}),H.map((function(e,t){return(0,h.jsxs)("div",{style:{backgroundColor:"lightgrey",marginTop:"16px",padding:"8px",borderRadius:"5px"},children:[(0,h.jsxs)("div",{children:["Address: ",e.address]}),(0,h.jsx)("br",{}),(0,h.jsxs)("div",{children:["Time: ",e.timestamp.toString()]}),(0,h.jsx)("br",{}),(0,h.jsxs)("div",{children:["Message: ",e.message]})]},t)}))]})})}},8581:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(8928)}])},4476:function(e){e.exports={container:"Home_container__1EcsU",main:"Home_main__1x8gC",footer:"Home_footer__1WdhD",title:"Home_title__3DjR7",description:"Home_description__17Z4F",code:"Home_code__axx2Y",grid:"Home_grid__2Ei2F",card:"Home_card__2SdtB",logo:"Home_logo__1YbrH",mainContainer:"Home_mainContainer__3jraL",dataContainer:"Home_dataContainer__2_XpO",header:"Home_header__3vlZW",bio:"Home_bio__vzdP9",waveButton:"Home_waveButton__2RrGC",inputForm:"Home_inputForm__3g8rY",textField:"Home_textField__1zA8p"}},8677:function(){},2808:function(){}},function(e){e.O(0,[774,906,888,179],(function(){return t=8581,e(e.s=t);var t}));var t=e.O();_N_E=t}]);